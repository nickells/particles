{"version":3,"sources":["draw-force.js","Particle.js","Knob.js","UI.js","Field.js","index.js"],"names":["DrawForceController","canvasContext","func","_onChange","e","startPoint","x","offsetX","y","offsetY","endPoint","state","down","canvas","addEventListener","onMouseDown","onMouseUp","onMouseMove","strokeStyle","beginPath","moveTo","lineTo","stroke","Particle","startPosition","_onDelete","position","force","acceleration","velocity","mass","seeds","Math","random","config","lifespan","autonomy","size","life","context","gravity","wind","seed","radian","PI","lifeRadians","horizontalMult","sinMult","sin","timestamp","lastTime","i","dimension","getWobble","Infinity","opacity","max","fillStyle","width","fillRect","destroy","height","HAS_TOUCH","window","applyStyles","elem","styles","Object","entries","key","val","style","notchStyles","display","backgroundColor","transition","toDegrees","toRadians","degree","getCoord","evt","coord","touches","within","min","nearestFromSet","num","set","lastItem","index","item","undefined","abs","length","createNotches","spinner","degrees","radius","notch_offset","forEach","notchPosition","cos","notchElem","document","createElement","classList","add","left","top","transform","appendChild","setTimeout","roundTo","to","round","degreeToValue","deg","DEGREES_DEAD_AREA","offset","newDeg","valueToDegree","Knob","selector","notchesCount","notches","deadArea","inner","firstChild","degreeInterval","degreesSet","degreesStart","notch","push","reverse","sort","a","b","lastDeg","active","onRelease","remove","body","rotate","onMove","getCoordForElement","preventDefault","center","offsetLeft","offsetWidth","offsetTop","offsetHeight","diffX","diffY","arctan","atan2","roundDeg","navigator","vibrate","onGrab","setValue","onChange","INITIAL_VALUES","intensity","init","fieldInstance","getElementById","_val","setConfig","Field","keyVal","particleConfig","particles","particle","innerWidth","innerHeight","getBoundingClientRect","getContext","Set","clearRect","update","divisor","setGravity","setWind","setContext","onDelete","delete","startParticles","addParticle","interval","timeout","clearTimeout","field","drawController","updateForces","start","debounce","timer","args","onResize","loop","requestAnimationFrame"],"mappings":";;AKOA;;AACA;;AACA;ADTA,ADAA;AEAA;ADCA,ACAA;AACA;AFAO,AECP,IFDaiK,cAAc,GAAG;AAC5B9H,AECF,EFDEA,QAAQ,EAAE,IADkB;AAE5BC,AECF,EFDEA,QAAQ,EAAE,CAFkB;AAG5BC,AEOF,EFPEA,EEOI0J,EFPA,EAAE,CAHsB,AEUnB,GAAG,IAAIvB,YAAJ,EAAd;AFNEN,AEOF,EFPEA,EHNWlK,AKaPgM,OFPK,EAAE,GAJiB,EEWV,GAAG,IAAIhM,8BAAJ,CAAwB+L,KAAK,CAACxJ,OAA9B,CAAvB;AFNEC,AHNA,AKcFwJ,EFRExJ,OAAO,EAAE,CAAC,EEQE,CFbgB,AEafwH,QAAf,CAAwB,OLdV/J,GKcWK,CAAD,EAAIE,CAAJ,EAAU,ILdhC,EAA0B;AGO1BiC,AHP0B,AKe1BsJ,EFRAtJ,AEQAsJ,IFRI,CEQC,CFRC,AEQAE,YAAN,CAAmB3L,CAAnB,EAAsBE,CAAtB;AFd4B,AEe7B,CFfM,AEaP;ALd4B,AKkB5BuL,IJnBaxK,CImBR,CAAC2K,KAAN;AJlBE,0BAEE;AAAA,AEQG,AHVqB,AKoB5B,IFVa/B,AEUPgC,IFVW,GAAG,CEUN,GAAG,KFVJhC,IAAO,AEUdgC,CFVe/B,OEUJ,CAAClK,IAAD,CFVG,AHGP,CKOc,CFVY,QHGzBA,IAAD,EAAU;AGFrB,AHGE,AKOF,MFVMiC,AHGJ,AKOEiK,KLPE,AKON,CLPOjM,EGHO,GAAG,IAAIsH,AHGnB,GAAiBvH,IAAjB,MGHe,CAAS;AFTxB,AEUA0H,AHGD,AKOD,IDpBW4C,ADUT5C,CHZwB,GCCxBpG,CIqBK,EFVE,EAAE,EADe,MFTxB,AIoBkB,QJrBlBA,aACA;AGCF,ADUE4D,AESkB,IFTlBA,GAAG,EAAE,GAFmB,OCRb,mBCmBFiH,IAAS;ADnBP,AHDX,AEYA7I,AHdwB,AKsBf6I,IFRT7I,EEQS6I,CFRN,EAAE,CEQa,GFXM,4BHMZ,UAACjM,CAAD,EAAO;AGFnBsH,AHGA,AKIkB,IFPlBA,EHGA,KAAI,CGHI,AHGHrH,EGHKkG,QAAQ,AHGlB,CGHmB8D,EHGD,YGHR,CAAwB,QAAxB;ACZC,AFJf,ADGI,AESwB,AHOL/J,GGPJ,EAMhByJ,GHCoBzJ,CAAC,EAAEF,CAAC,CGPR,AHOSG,CGDhB0J,MHCU,QGDI,CAAC9H,QANR,CF+CN,CExCV6H,QAPgB,CF+CL9J,AExCF,IFwCC,EAAU,IExCXoE,GAAG,EAAI;ADlBnB,AD2DI,AExCA,AHDiC9D,AKKjCsL,IAAAA,EJoCA,EExCIxB,AHD6B9J,CAAC,ECyC9B,ADzCgCJ,CCyC/BqB,AExCG,AHD6B,CAAChB,EGC3BuB,CEIC,CAACoK,EFJE,CAAClF,CFwChB,CIpCY,CAAZ,CJoCiBhH,CExCN,CAAWoE,EFwCtB,CExCW,CAAX;AChBW,AFFf,AD2DG,AD1CmB,AKMlB8H,IAAAA,CJtBA,EDgBA,EKMK,GAAGrF,UAAU,CAAC,gBDFT,UAAC0D,MAAD,EAAY;AACtB,AFpBJ,ACiBIL,AHDA,AKKmB,IHrBjBtG,ACiBFsG,ECGA,AJJA,KIII,AJJA,CIICM,AJJAhK,CEhBM,AGqBcR,IHrBX,ACiBD,AEIgB,CFJfqK,EHDd,GAAgB,AKKS,GDDzB,CDHA,CAAwB,IEIS8B,GHrBDtI,CGqBP,CAAN,IHrBR,CAAf,mBEqBS,KAAI,CAAC2G,cADV,GAEKD,MAFL;AHpBA,AEkBEtI,AHFe7B,AKKE,KAAD,CFHhB6B,CEGsC,CLLvB7B,CChBZoB,ADgBa,CKKA,CLLEtB,AKKpB,CLLqB,CAACG,CGEZ,EAAE+J,CFlBZ,GEkBgB,AHFA,KGEK,IAAT,GAAgBhH,MFlBP9B,EEkBT,GAA2B8I,QFlBvC;AGwBA,AFtBJ,ADDI,AEgBwB,AHDO9J,AKMhC,GAHD,EFFE,CCOA,EJR+BA,CEd1BwD,ADDArC,ADe2B,EIQ5B,AJR8BvB,CIQ7BuK,AJR8B,CAAClK,CCfpC,GAAa,GCCjB,CEsBI,AFtBiBwD,CEsBFkC,GFtBnB,EAA2BjC,EEsBvB,CAAuB,GFtB3B,EAAmC,KEsBR0G,QAAQ;AAAA,AFrBjC,ADDItK,AEkBH,AHJiB,AKOnB,CAND,EFTmB,CAAjB,EFNIA,CAAC,ADcH,ECdK,CADQ,KGuBsBsK,QAAQ,CAACL,SAAT,CAAmB,GFrBjCpG,EEqBqC,CAACuG,GFrBhC,CAACtG,OAAP,CAAeF,EEqBD,CAAJ,GFrBV,CAAvB,qCAA+C;AEqBd,AFrB5B,ADAD1D,AEkBJ,AHJE,MCdEA,AEkBE4B,AHJJ,CIOA,AHrBG,EAAE,EDcD,CAACzB,EGIO,GAAG,AHJf,CAAWC,GGIQ6G,CHJnB,GAAkB,IAAlB,KGIe,CAAS;ACIzB,AFtBI,ADFU,AEqBbG,AHJD,AKOH7D,IFHI6D,CCtBW,AHCX,ADJwB,CK4BtB,CAAC9G,CHtBKuD,GAAL,ACmBI,EAAE,CADe,SEI5B,CAAwB,QAAxB,EAAkC8H,QAAQ,CAACJ,KAAK,CAACO,QAAP,CAA1C;AHtBO,ADEH,AEkBAlH,IAAAA,GAAG,CDpBUd,CDER1C,AEkBA,CAFmB,CDlBrB,UDEH,GAAoB;AGLT,AHMTtB,AEkBFkD,AH3BwB,AK8B5B,IFHIA,AEGE+I,EJrBAjM,CAAC,AEkBA,CEGG,CJrBD,AEkBA,CFnBe,AEgBI,CEMf,SAAPiM,IAAO,CAACtJ,SAAD,EAAe,EDoCf,CJ3CC,UAAC7C,CI2CI,AJ3CL,EAAO;AI4CjB,AF5DA6D,ADGEzD,AEkBFkH,AHJA,AKOFqE,EAAAA,EHxBE9H,ACqBAyD,ECuCA,AHzDElH,CAAC,AIqBA,CHxBC,AGwBA2K,CHxBC5G,ADGA,CDcD,CI2CA,AJ3CC,CI2CA1D,ADvCG,EDrBR,ACqBU0F,AEGZ,CHxBalC,AGwBApB,CLPF,CAACtC,CI2CV,AF5DA,CE4DY+C,GF5DMY,ACqBA,AHJb,CGIc+F,AHJHzJ,CI2ChB,ACpCF,CHxBE,EE4DoBmD,AJ3CpB,EAAsB,II2CI,CAAC8G,GDvCjB,CAAwB,MCuClC,EDvCU;ACwCV,AF5DD,ADAqB,AEgBI,AHCxB,AKOFmB,EAAAA,CFRiB,EFhBf,AEsBDjC,CCsCC,AJ3CA,KI2CI,AJ3CA,CI2CClJ,AJ3CAF,CGDU,CAMPsJ,EEEI,CLPZ,AKOakB,CDoCb,AJ3CWvK,CI2CCiD,GJ3CZ,CKOF,EDoCE,AJ3CkB,GI2CGE,ADtCC,CAAC3B,CHLvB,II2C2B,CAAC0I,ED5Cb,EAOhBd,OCqCsB,CD5CN,CAOP,CCqCkCzD,QAAQ,CAAC8D,ADrC3C/F,GAAG,EAAI,SCqC2B,CAAwB,KAAxB,EAA+ByG,qBAA/B,GAAuDlH,MAAjG;AACD,AF5DF,ADGG,AEoBAuG,AHNA,AKOFoC,EAAAA,EFDEpC,CC7BW,CJuBX,GCdKvI,EDcD,CAACnB,KCdL,AEoBa,CAAC6J,EFpBE,ADchB,GAAgB,AKOG,CAACgC,GFDpB,CAAwB,AECL,CAArB;AJpBIjM,AEoBA8B,AHPe9B,AKQpB,CAJD,KJjBMA,AEoBA8B,CFpBC,CDac9B,CCbZ,ADaa,CCdF,CDcIF,CAAC,CAACG,CGOZ,EAAEyB,IAAI,AHPA,CGOCkF,KAAL,CAAW5C,GAAX;AC7BZ,AFOJ,ADGM9D,AEkBsB,AHNOA,IEf7BgE,CCqBF,CFlBEhE,CAAC,CDY4BA,CItB1BK,AHUA,ADY2B,EAAET,CAAC,CAACK,EItBpC,AFOa,GEPC8F,AFOE,QEPM,CAACC,aAAT,CAAuB,QAAvB,CAAd;AACA,AFOF9E,ADAkB,AEuBjB,AHTiB,AKUpB,EHxBEA,CCYiB,CAAjB,CFZE,EDcA,EIrBKb,CFOC,EAAE,EGwBPkL,CD/BD,CAAYrI,GC+BhB,ED/BI,CFMgB,EENIK,MAAM,CAAC8G,UAA3B;AACA,AFOFnH,ADIE,AEmBF,AEEF6I,EHzBE7I,EGyBE,EFFIrB,CDvBD,EEPExB,AFOA,ADIAiB,CEmBG,GFnBR,AEmBW,CDzBK,CELhB,CAAY+B,AHWA,CEmBG4D,EFnBf,GGXA,GAAqB1D,KD8BV,CC9BgB,AD8BP,CC9BQ+G,WAAP,GAAqBvE,QAAQ,CAAC8D,cAAT,CAAwB,KAAxB,EAA+BU,qBAA/B,GAAuDlH,MAAjG;AACA,AFOFA,ADKE,AEkBA+D,AHTA,EEdF/D,ECuBE+D,EHTA,EEdI,CEPCrF,AHYAR,CCLC,CCuBC,AHTH,CAAC5B,CGSI,CFlBT,AEiBoB,CDzBJ,CEJhB,CHYa,CAAE6B,CGZA,EJqBf,CCTmB,ADUjB,CCVkBC,CGZApB,GJsBd,CAACH,CCVQ,CGZA,CAAYsK,AHYd,EAAiBhJ,GDU5B,CCVgC,ADUlB1B,CCVmB2B,ADUjC,GItBa,AJsBK,CItBkB,EHYR,EGZf,AHYF,ADUW,CItBxB,AJsByB5B,CCVoB2B,IAAI,CAACC,IDU9B,CAAgB3B,CCVS,ADS7C,ECTa,ADWX,ECX0D0B,GDWtD,CCX0D,ADWzDtB,CCX0DuB,MAAL,CDW1D,CCXW,ADWGzB,CAAd,CCXyEwB,EDWvD,ECX2D,CAACC,EDWxD,CAAC5B,GCXkD,EAA9D,CAAb,IDWoB,CAAgBG,CAFpC;AIpBA,AFOFiE,ADME,AEiBAW,AHND,EEjBDX,ECuBEW,CHtCwB,EGsCrB,EC9BEuF,AFOA,ADMAzI,AEiBA,CAFe,CDrBb,IDMP,GGbA,AHac,GGbG,IAAI+I,AFGL,GEHC,EAAjB;AACA1E,AFOF7B,ADMIvC,AEiBFqB,EDvBFkB,EEPE6B,AD8BA/C,EFjBErB,CEiBC,EAAE,CAHe,EC3BZ,CAAC0G,CHaC,EAAE,CGbZ,AFOa,CEPC/B,CFOC,ADKD,MCVE,IEFhB,CAA0B,KAAKjG,MAA/B;AAEA,AFMF8D,ADMIvC,AEiBFsF,AHxCwB,EEiB1B/C,ECuBE+C,EFjBEtF,GGZGI,GFMG,ACuBA,EFjBE,AEiBA+D,EC7BV,AHYY,CAFE,EGVC,CAAC,ED6BE,CC7BlB,AD6BmB8D,cAAT,CAAwB,GHNtB,KGMF,KHNGjK,CAAD,EAAO;AItBnB,AFDgB,ADadiC,AEYkB,AHDpB,CExBJ,ECyBe,EAMZ0H,CFlBG1H,GGZGI,CHYC,ADWF,ECXI,CGZR,ADwBW,CAMHwH,CHPA,CIvBI,AJuBHtJ,CIvBT,IJuBI,CAAWC,IAAf,EGOsB,AHPD,CGOEyB,IANZ,EAOZ2H,QAPY,CAOH,UAAA1F,GAAG,EAAI;AC7Bf,AHOc,AEuBd8F,AHRE,IGQFA,CFvBA,GDeE,CItBGM,IJsBC,CAAChK,GGQM,CAAC6J,IHRZ,CItBF,EJsBkB,EGQlB,CAAwB,gBC9BGN,kBAA3B;AACD,AFKH,ADQI,AEiBE5H,AHTiB/B,IEhBjBsE,ECyBAvC,GFjBGC,CEiBC,AHTahC,CAAC,CGSZ0B,CDzBG,ADQX,ADQsB5B,CAAC,CAACG,CEhBV,ADQF,AEiBA,CFjBZ,AEiBa2G,KAAL,AHTU,CGSC5C,EDzBjBM,CCyBM,QDzBM,CAAAjC,MAAM;AAAA,ACwBI,AHRSnC,KGQjC,IDxBwBmC,CFgBSnC,CAAC,EAAEJ,CAAC,CEhBP,AFgBQK,IEhBJ,MAAMuB,IAAI,CAACY,EAAf,CAAV;AAAA,ADUpB,AEiBD,AHXmB,CEhBtB,ECgBe,CAAb,KFNOnB,ADMH,SCNF,GAAiB,YAAM,CAAE,CAAzB;AACD,AEiBD,AHXG,MGWGyI,SAAS,GAAG,IAAIzC,aAAJ,CAAS;AD1B7B,AC2BIG,AHXD,IEhBG/C,AC2BF+C,CHjDwB,MIiB1B,ADgCS,ED3BI,AC2BF,EADgB,CD1BX,SAAZ/C,EELG5B,OFKS,CAAA6B,CELhB,EAAiB,GFKK;AEJpB,AFIoB,AC4BpBM,IAAAA,GAAG,ED5BqBN,AC4BnB,CAFoB,CC9BpBvC,IFIyB,GEJ9B,CAAa2I,AFIqBlJ,IAAI,CAACY,EAAL,EEJlC,CAAuB,AFIqB,CEJ5C,EAA0B,AFII,CEJ9B,AFIoB,EEJS,KAAK/B,MAAL,CAAY6C,KAAzC,EAAgD,KAAK7C,MAAL,CAAYgD,MAA5D;AACA,AFGoB,AC6BpBL,AHlDA,CEqBJ,GC6BIA,GAAG,EAAE,AHlDAvD,EIkBA0K,CD6BoB,QC7BzB,CAAexE,CJlBf,GAAqBlG,GIkBrB,CAAuB,SJlBvB,CIkBuB2K,QAAQ;AAAA,ADiC/BlD,AHlDA,IGkDAA,KHlDKzH,EC+BP,CEmBU,EAAEsG,CCjCyBqE,ODiCjB,AHlDlB,CIiB2C,ADiCxBP,AHlDAxJ,CIiByBsK,KJjB5C,CIiBmC,AJjBTrK,CIiByBmC,AHc1CV,MEmBC,CFnBZ,AEmBoC,ECjCC,AHclB,CGdc,KDiCrB,AHlDV,CAA2C,WAA3C,EAAwD,KAAKxB,WAA7D;AIiB+B,AFKnC,ADUI,AEcyB,AH7CzB,GG6CgB,EAMjBgJ,ECnCC,EFKKhF,AFrBA9E,EC+BAsC,EEcW,CAMR0H,GD9BZ,CAAkBjF,ADUd,GCVJ,ADUmBzC,CD/Bf,CEqBmB,AFrBA1B,KC+BnB,AEoBsB,CAACqJ,AHnDvB,CAA0BpJ,QG6CV,EAOjBkJ,MHpDC,CAA2C,CG6C3B,CAOR,OHpDR,EAAsD,CGoD9C1F,GAAG,CHpDgDtD,CGoD5C,QHpDf;AIiBD,AFKD,ADUC,AEqBCoJ,AHpDA,IGoDAA,KD/BK,AFrBAnK,QGoDQ,CAACsK,CD/BTjG,GAAG,AFrBR,CAAmBzD,CEqBP,GC+BZ,CAAwB,CHpDxB,CAA0BC,gBAA1B,CAA2C,WAA3C,EAAwD,KAAKG,WAA7D;AEsBA,AC+BEiJ,AHnDF,MGmDEA,ED/BEjF,CFpBCtE,IEoBI,CFpBT,CGmDW,CD/BC2D,CC+BCtC,AHnDA,EEoBE,EC+BE,CAACkF,ED/BE,GAAR,AC+BC,CAAW5C,ED/BE,CC+Bb,QD/BD,GAA0B,SAAtC;AACA,AC6BwB,AHjDtB1D,KGiDF,CHjDEA,IAAI,CEoBCkD,CFpBC,QEoBQ,GAAGkB,GAAG,CAACE,OAAJ,CAAY,CAAZ,EAAeD,KAAf,CAAH,GAA2BD,GAAG,CAACC,KAAD,CAA9C;AACD,AC+BA,AHrDc,GEmBf,ACuBkB,CDxBG,ACwBrB,CDnBA,AFvBE,MIwBF,AHOA,oBAAWzC,EGPElC,CAAb,EAAgBE,CAAhB,CHOA,CGPkB,CHOC;AGPD,AFAnB,ADQG,AEsBH,CAlDM,UF4BEmB,KAAL,CAAWnB,CAAX,GAAegC,OAAf;AACD,AD7BC,SAAKrC,SAAL,GAAiB,YAAM,CAAE,CAAzB;AIqBA,AFCJ,AFrBG,SEqBMgF,CEDCiG,KFCV,CAAgB9G,CEDC,EFCjB,CEDoB,CFCCc,GEDjB,AFCJ,EAA0B5B,GAA1B,EAA+B;AEA3B,AFCF,SAAOc,EEDA9B,CFCG,IAAI4C,EEDZ,CFCK,EEDU,CAAC5E,CAAD,AFCI8D,GEDC8G,AFCE,IAAI5H,GED1B,AFCF;AEAE,AFCH,WEDQf,AHQP,IGRE,GAAYnC,CAAC,GAAG8K,MHQV3I,CGRN,GHQF,EAAa;AGPX,AHQA,WGRKkI,AHQAhJ,KAAL,CAAWrB,CAAX,EGRA,CAAe6F,AHQA1D,IAAf,GGRA,CAAuB,UAAAmI,QAAQ,EAAI;AACjCA,AFCN,ADOG,QGRGA,CFCGvF,EFIP,KILY,CAACgG,MFCf,CAAwB/F,GEDlB,AFCN,CED0B,CFCGC,AFIlB,GEJX,EED8B,AFCI,CEDH/C,OAAzB;AACAoI,AFCJ,AFIE,MEJEpF,EEDAoF,EJKE,IEJN,CFIWjK,CILC,CAAC2K,GJKP,CAAW1K,GILb,CAAiB,AJKnB,EAAqB,IILE,CAAC6B,IAAtB;AACD,AJKC,OIRF,MJQOxC,aAAL,CAAmBiB,WAAnB,GAAiC,KAAjC;AIJH,AFF+B,AFO5B,WCEJ,EDFSjB,aAAL,CAAmBkB,GCEbe,MAAV,ADFI,ECEa,OCPSqD,GAAG,CAACnB,OAAJ,EAFM;AAAA,ADU9B,ADFE,WCEGlC,EDFEjC,ICEP,GAAciC,MAAd,ADFE,CAAmBd,MAAnB,CAA0B,KAAKf,UAAL,CAAgBC,CAA1C,EAA6C,KAAKD,UAAL,CAAgBG,CAA7D;ACGH,ADFG,aAAKP,aAAL,CAAmBoB,MAAnB,CAA0B,KAAKX,QAAL,CAAcJ,CAAxC,EAA2C,KAAKI,QAAL,CAAcF,CAAzD;AET4B,AFU5B,WINJ,EJMSP,aAAL,CAAmBqB,KINXsJ,CJMR,OINJ,EAAsB;AAAA,AFFtB,AFSG,wDETsC;AAAA,AFUxC,WCCD,qBAAmB;AGRjBA,AFHuC,ADWtB,MGRjBA,IFHQnF,ADWA/C,IGRA,AHQS,CGRR6I,AFH8B,UEGvC,CAAoB,KAAKhJ,OAAzB,+CHQe,CAAE;AGPjBqI,AFJuC,ADYvC,MGRAA,IFJelF,IEIP,AFJ+B,CEI9B2F,UAAT,CAAoB,KAAK7I,OAAzB;AACAoI,AHQA,MGRAA,IHQMjI,IGRE,CAAC2I,CHQG,GAAGtJ,GGRf,CAAiB,AHQE,CAACY,EAAL,EGROH,CHQG,GGRzB,AHQA;AGPAmI,AFLA,ADaA,MGRAA,IFLItF,ADaEzC,GCbC,CEKC,CAAC0H,GFLG7E,GDaK,CCbjB,EEKA,AFLkB,ADaG,CGRF,IHQOpD,CGRFoI,CFLChF,EDaL,ECbF,CAAlB,ADakC/C,KCZ7B,CDYe,EGRpB,CFJS6C,ADYkC,KAAKzD,GCZ/B,EDY0B,CAAWW,ECZhCiD,EDYqB,CAA3C,CAHiB,CAG2C,ICZnD,IAA0BL,GAAG,GAAGI,IAApC,EAA0C;AEK/C,AFJE,WEIGiF,IFJIjF,IAAP,CEIF,CAAegB,GAAf,CAAmBkE,QAAnB;AACAA,AFJC,ADWD,MGPAA,CFNK,GDaC9H,GCXC,CEIC,CAAC0I,EFJElG,GAAG,GEId,AFJiBE,CEIC,AHOE,GAAG,ICXZ,EDWkB,CGPXoF,CFJWtF,GAAG,ADWEvD,GCXC2D,CEIT,C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","file":"particles.e31bb0bc.js","sourceRoot":"..","sourcesContent":["export class DrawForceController {\n  constructor(canvasContext){\n    this.canvasContext = canvasContext\n    this.canvasContext.canvas.addEventListener('mousedown', this.onMouseDown)\n    this.canvasContext.canvas.addEventListener('mouseup', this.onMouseUp)\n    this.canvasContext.canvas.addEventListener('mousemove', this.onMouseMove)\n\n    this.state = {\n      down: false\n    }\n\n    this._onChange = () => {}\n  }\n\n  onChange = (func) => {\n    this._onChange = func\n  }\n\n  onMouseDown = (e) => {\n    this.startPoint = {x: e.offsetX, y: e.offsetY}\n    this.endPoint = {x: e.offsetX, y: e.offsetY}\n    this.state.down = true\n  }\n  \n  onMouseUp = (e) => {\n    if (!this.state.down) return\n    this.state.down = false\n    this.endPoint = {x: e.offsetX, y: e.offsetY}\n\n    this._onChange(\n      this.endPoint.x - this.startPoint.x,\n      this.endPoint.y - this.startPoint.y,\n    )\n  }\n\n  onMouseMove = (e) => {\n    if (this.state.down) {\n      this.endPoint = {x: e.offsetX, y: e.offsetY}\n    }\n  }\n\n  update() {\n    if (this.state.down) {\n      this.canvasContext.strokeStyle = 'red'\n      this.canvasContext.beginPath()\n      this.canvasContext.moveTo(this.startPoint.x, this.startPoint.y)\n      this.canvasContext.lineTo(this.endPoint.x, this.endPoint.y)\n      this.canvasContext.stroke();\n    }\n  }\n}","export class Particle {\n  constructor({\n    startPosition\n  }){\n    this.position = { ...startPosition}\n    this.force = {\n      x: 0,\n      y: 0,\n    }\n    this.acceleration = {\n      x: 0,\n      y: 0,\n    }\n    this.velocity = {\n      x: 0,\n      y: 0,\n    }\n\n    this.mass = 0.1\n\n    this.seeds = [ Math.random(), Math.random(), Math.random(), Math.random(), Math.random() ]\n\n    this.config = {\n      lifespan: 500,\n      autonomy: 1,\n      size: 5,\n    }\n\n\n    this.life = 0\n\n    this._onDelete = () => {}\n  }\n\n  setContext(context){\n    this.context = context\n  }\n\n  setGravity(gravity){\n    this.force.y = gravity\n  }\n\n  setWind(wind){\n    this.force.x = wind\n  }\n\n  setConfig(config){\n    this.config = config\n  }\n\n  getWobble(seed = 0){\n    // wobbles\n    const radian = Math.PI / 180\n    const lifeRadians = (this.life) * radian * this.seeds[seed] // add random so it appears at a random place in the sine curve\n    const horizontalMult = 0.5 * this.seeds[seed]\n    const sinMult = 10 * this.seeds[seed]\n    return (horizontalMult * Math.sin(lifeRadians * sinMult))\n  }\n\n  onDelete = (func) => {\n    this._onDelete = func\n  }\n\n  destroy(){\n    this._onDelete(this)\n    delete this\n  }\n\n  update(timestamp){\n    this.life += 1\n    this.lastTime = timestamp\n    \n    // todo: only update this if changed from last tick\n    this.acceleration = {\n      x: this.force.x * this.mass,\n      y: this.force.y * this.mass,\n    }\n\n    for (let i  = 0; i < this.config.autonomy; i++) {\n      let dimension = i % 2 === 0 ? 'x' : 'y'\n      this.position[dimension] += (this.getWobble(i) * (this.config.autonomy + 1))\n    }\n    // this.acceleration.x += this.getWob\n    // gravity-based\n    \n    this.velocity = {\n      x: this.life * this.acceleration.x,\n      y: this.life * this.acceleration.y\n    }\n    \n\n    this.position.x += this.velocity.x\n    this.position.y += this.velocity.y\n\n\n    // draw\n    // this.context.fillStyle = 'black'\n    if (this.config.lifespan < Infinity) {\n      const opacity = Math.max((this.config.lifespan - this.life) / this.config.lifespan, 0)\n      this.context.fillStyle = `rgba(0, 0, 0, ${opacity})`\n    }\n    else {\n      this.context.fillStyle = `rgba(0, 0, 0, 1)`\n    }\n    const width = this.config.size * this.seeds[0]\n    this.context.fillRect(this.position.x, -this.position.y, width, width)\n    const canvas = this.context.canvas\n\n    // reset when OOB\n    if (this.life >= this.config.lifespan) {\n      this.destroy()\n    }\n    if (this.force.y < 0) {\n      if (this.position.y <= -canvas.height * 2) {\n        this.destroy()\n      }\n    }\n    else if (this.force.y > 0) {\n      if (this.position.y >= canvas.height) {\n        this.destroy()\n      }\n    }\n    if (this.force.x >= 0) {\n      if (this.position.x >= canvas.width) {\n        this.position.x = 0\n      }\n    }\n    if (this.force.x < 0) {\n      if (this.position.x <= 0) {\n        this.position.x = canvas.width\n      }\n    }\n  }\n}","/*\n  https://raw.githubusercontent.com/nickells/knob/master/script.js\n*/\n\nconst HAS_TOUCH = 'ontouchstart' in window\n\nfunction applyStyles(elem, styles) {\n  for (let [key, val] of Object.entries(styles)) {\n    elem.style[key] = val\n  }\n}\n\nconst notchStyles = {\n  position: 'absolute',\n  width: '6px',\n  height: '1px',\n  display: 'inline-block',\n  backgroundColor: 'grey',\n  transition: `transform 500ms`\n}\n\nconst toDegrees = radian => radian * (180 / Math.PI)\n\nconst toRadians = degree => degree * (Math.PI / 180)\n\nfunction getCoord(evt) {\n  return val => {\n    let coord = val === 'X' ? 'clientX' : 'clientY'\n    return HAS_TOUCH ? evt.touches[0][coord] : evt[coord]\n  }\n  // switch to screen if parent has unknown width?\n}\n\nfunction within(val, min, max) {\n  return val >= min && val <= max\n}\n\nfunction nearestFromSet(num, set) {\n  let lastItem\n  for (let [index, item] of set.entries()) {\n    if (num === item) return item\n    else if (lastItem === undefined && num < item) {\n      return item\n    } else if (num > lastItem && num < item) {\n      return Math.abs(num - lastItem) > Math.abs(num - item) ? item : lastItem\n    } else if (index === set.length - 1) {\n      return item\n    }\n\n    lastItem = item\n  }\n}\n\n\nfunction createNotches(spinner, degrees) {\n  const radius = 25\n  const notch_offset = 15\n\n  degrees.forEach((degree, index) => {\n    degree -= 180\n    let notchPosition = {\n      x: (radius + notch_offset) * Math.cos(toRadians(degree)) + radius - 3,\n      y: (radius + notch_offset) * Math.sin(toRadians(degree)) + radius - 0\n    }\n    const notchElem = document.createElement('div')\n    notchElem.classList.add('notchElem')\n    applyStyles(notchElem, {\n      ...notchStyles,\n      left: `${notchPosition.x}px`,\n      top: `${notchPosition.y}px`,\n      transform: `rotate(${degree}deg) scale(0)`\n    })\n    spinner.appendChild(notchElem)\n    setTimeout(() => {\n      applyStyles(notchElem, {\n        transform: `rotate(${degree}deg) scale(1)`\n      })\n    }, index * 50)\n  })\n}\n\nfunction roundTo(num, to) {\n  return Math.round(num / to) * to\n}\n\nfunction degreeToValue(deg, DEGREES_DEAD_AREA, min, max) {\n  // calc offset\n  const offset = DEGREES_DEAD_AREA / 2\n  let newDeg = 360 - deg\n  if (newDeg < 90) newDeg += 360\n  newDeg = newDeg - 90 - offset\n  newDeg = newDeg / (360 - DEGREES_DEAD_AREA)\n  newDeg = min + (newDeg * (max - min))\n  return newDeg\n}\n\nfunction valueToDegree(val, DEGREES_DEAD_AREA, min, max) {\n  // calc offset\n  const offset = DEGREES_DEAD_AREA / 2\n  \n  // get degrees out of 360 (minus offset)\n  let deg = (val - min) / (max - min) * (360 - DEGREES_DEAD_AREA)\n  \n  // flip directions (and orientation)\n  deg = 270 - deg \n\n  // account for dead-area offset\n  deg -= offset\n\n  return deg\n}\n\nfunction Knob({ selector: elem, notches: notchesCount, min = 0, max = 100, deadArea: DEGREES_DEAD_AREA = 90 }) {\n  \n  let spinner = elem\n  let inner = elem.firstChild\n  let _onChange = () => {}\n\n  // if there is a dead zone, add 1 to notchescount to spread evenly. otherwise it will overlap at the 360 mark\n  const degreeInterval =\n    (360 - DEGREES_DEAD_AREA) /\n      (DEGREES_DEAD_AREA ? notchesCount - 1 : notchesCount) || 1\n\n  // create degrees to map to, and notches\n  const degreesSet = []\n  const degreesStart = 270 - DEGREES_DEAD_AREA / 2 // assume 360 degrees, and 0 is at 3:00 position (CCW), then move it to this new starting point\n  \n  for (let notch = 0; notch < notchesCount; notch++) {\n    let val = degreesStart - notch * degreeInterval\n    val = (val + 360) % 360\n    degreesSet.push(val)\n  }\n\n  // reverse the degree set so animation works\n  createNotches(spinner, degreesSet.reverse())\n\n  // sort the degree set so we can properly get the closest match algorithmically\n  degreesSet.sort((a, b) => a - b)\n\n  let lastDeg = 0,\n    active = false\n\n  function onRelease(e) {\n    if (active) {\n      spinner.classList.remove('is-active')\n      document.body.classList.remove('is-grabbing')\n      active = false\n    }\n  }\n\n  function rotate(deg) {\n    lastDeg = deg\n    // change degree to match CSS's interpretation of geometry\n    // and because the notch is vertical upon start\n    inner.style.transform = `rotate(${90 - deg}deg)`\n  }\n\n  function onMove(e) {\n    const getCoordForElement = getCoord(e)\n    e.preventDefault()\n    if (active) {\n      const center = {\n        x: spinner.offsetLeft + spinner.offsetWidth / 2,\n        y: spinner.offsetTop + spinner.offsetHeight / 2\n      }\n      let diffX = getCoordForElement('X') - center.x\n      let diffY = center.y - getCoordForElement('Y') // because Y is upside down from regular math\n      let arctan = Math.atan2(diffY, diffX)\n      let deg = (toDegrees(arctan) + 360) % 360\n      let roundDeg = nearestFromSet(deg, degreesSet)\n      if (Math.abs(roundDeg) === Math.abs(lastDeg)) return\n      else {\n        rotate(roundDeg)\n        navigator.vibrate && navigator.vibrate([50])\n        _onChange(degreeToValue(roundDeg, DEGREES_DEAD_AREA, min, max))\n      }\n    }\n  }\n\n  function onGrab(e) {\n    if (!active) {\n      active = true\n      spinner.classList.add('is-active')\n      document.body.classList.add('is-grabbing')\n      onMove(e)\n    }\n  }\n\n  spinner.addEventListener('mousedown', onGrab, false)\n  spinner.addEventListener('mousedown', onGrab, false)\n  spinner.addEventListener('touchstart', onGrab, false)\n  window.addEventListener('mouseup', onRelease, false)\n  window.addEventListener('touchend', onRelease, false)\n  window.addEventListener('mousemove', onMove, false)\n  window.addEventListener('touchmove', onMove, false)\n\n  return {\n    setValue(val) {\n      rotate(valueToDegree(val, DEGREES_DEAD_AREA, min, max))\n      return this\n    },\n    onChange(func) {\n      _onChange = func\n      return this\n    }\n  }\n}\n\nexport default Knob","import Knob from \"./Knob\"\n\nexport const INITIAL_VALUES = {\n  lifespan: 1620,\n  autonomy: 1,\n  size: 5,\n  intensity: 100,\n  gravity: -0.1,\n  wind: 0,\n}\n\nexport const init = (fieldInstance) => {\n  const lifespan = new Knob({\n    notches: 16,\n    min: 100,\n    max: 2000,\n    selector: document.getElementById('knob-1')\n  })\n  .setValue(INITIAL_VALUES.lifespan)\n  .onChange(val => {\n    let _val = Math.round(val)\n    fieldInstance.setConfig({\n      lifespan: _val === 2000 ? Infinity : _val\n    })\n  })\n  const autonomy = new Knob({\n    notches: 6,\n    min: 0,\n    max: 5,\n    selector: document.getElementById('knob-2')\n  })\n  .setValue(INITIAL_VALUES.autonomy)\n  .onChange(val => {\n    fieldInstance.setConfig({\n      autonomy: Math.round(val)\n    })\n  })\n  const size = new Knob({\n    notches: 8,\n    min: 2,\n    max: 9,\n    selector: document.getElementById('knob-3')\n  })\n  .setValue(INITIAL_VALUES.size)\n  .onChange(val => {\n    fieldInstance.setConfig({\n      size: Math.round(val)\n    })\n  })\n  const intensity = new Knob({\n    notches: 16,\n    min: 0,\n    max: 100,\n    selector: document.getElementById('knob-4')\n  })\n  .setValue(INITIAL_VALUES.intensity)\n  .onChange(val => {\n    fieldInstance.setConfig({\n      intensity: Math.round(val)\n    })\n  })\n}","import { Particle } from \"./Particle\"\nimport { INITIAL_VALUES } from \"./UI\"\n\nexport class Field {\n  constructor(){\n    this.canvas = document.createElement('canvas')\n    this.canvas.width = window.innerWidth\n    this.canvas.height = window.innerHeight - document.getElementById('hud').getBoundingClientRect().height\n    this.context = this.canvas.getContext('2d')\n    this.particles = new Set()\n    document.body.appendChild(this.canvas)\n\n    this.gravity = -0.1\n    this.wind = 0\n    \n    this.particleConfig = { ...INITIAL_VALUES }\n  }\n\n  update(timestamp){\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.particles.forEach(particle => particle.update(timestamp))\n  }\n\n  setConfig = (keyVal) => {\n    this.particleConfig = {\n      ...this.particleConfig,\n      ...keyVal,\n    }\n    this.particles.forEach(particle => particle.setConfig(this.particleConfig))\n  }\n\n  updateForces(x, y){\n    const divisor = 1000\n    this.gravity = -y / divisor\n    this.wind = x / divisor\n    this.particles.forEach(particle => {\n      particle.setGravity(this.gravity)\n      particle.setWind(this.wind)\n    })\n  }\n\n  addParticle(particle) {\n    particle.setContext(this.context)\n    particle.setGravity(this.gravity)\n    particle.setWind(this.wind)\n    particle.setConfig(this.particleConfig)\n    this.particles.add(particle)\n    particle.onDelete(particle => {\n      this.particles.delete(particle)\n    })\n  }\n\n  start(){\n    const startParticles = () => {\n      this.addParticle(new Particle({\n        startPosition: {\n          x: Math.random() * this.canvas.width,\n          y: this.gravity < 0 ? 1 : -(this.canvas.height - this.particleConfig.size)\n        }\n      }))\n      const interval = 100 - this.particleConfig.intensity\n      this.timeout = setTimeout(startParticles, interval)\n    }\n\n    startParticles()\n  }\n\n  onResize = () => {\n    this.canvas.width = window.innerWidth\n    this.canvas.height = window.innerHeight - document.getElementById('hud').getBoundingClientRect().height\n  }\n\n  stop(){\n    clearTimeout(this.timeout)\n  }\n}","/*\n  get gravity/wind into one config called forces\n  lifespan 100 pauses spawning\n  color?\n  blur?\n*/\n\nimport { DrawForceController } from \"./draw-force\"\nimport { Field } from \"./Field\"\nimport { init } from \"./UI\"\n\n\nconst field = new Field()\nconst drawController = new DrawForceController(field.context)\n\ndrawController.onChange((x, y) => {\n  field.updateForces(x, y)\n})\n\nfield.start()\n\nconst debounce = (func) => {\n  let timer\n  return (...args) => {\n    clearTimeout(timer)\n    timer = setTimeout(() => func(...args), 300)\n  }\n}\n\nwindow.addEventListener('resize', debounce(field.onResize))\n\nconst loop = (timestamp) => {\n  field.update(timestamp)\n  drawController.update()\n  requestAnimationFrame(loop)\n}\n\ninit(field)\n\nloop()\n\n"]}